<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" type="text/css" />
    <link rel="stylesheet" href="/vendor/border-box.css" type="text/css" />
    <link rel="stylesheet" href="/styles/layout.css" type="text/css" />
    <link rel="stylesheet" href="/styles/main.css" type="text/css" />
    <script
      src="https://use.fontawesome.com/releases/v5.15.3/js/all.js"
      data-auto-a11y="true"
    ></script>
    <title>Home Page</title>

    <script type="text/javascript" src="/vendor/jquery-3.0.0.js"></script>
    <script type="text/javascript" src="/scripts/app.js"></script>
  </head>
  <body>
    <!-- header -->
    <%- include('partials/_nav') %>
    <main>
      <div class="home-page">
        <h1>Home Page</h1>

        <div class="card-container">
          <% resources.forEach(resource => { %>
          <div class="card">
            <div class="title">
              <h3><%= resource.title %></h3>

              <div class="web-link">
                <p>written by: <%= resource.username %></p>
                <a href="<%= resource.url %>" target="_blank"
                  ><i class="fas fa-link fa-xs"></i
                ></a>
              </div>
            </div>
            <div class="main">
              <div class="img-container">
                <% if ( resource.image_url !== null) { %>
                <img src="<%= resource.image_url %>" alt="" />
                <% } else { %>
                <img src="https://source.unsplash.com/random/600x600" alt="" />
                <% } %>
              </div>
              <div class="description">
                <p class="teaser"><%= resource.substring %>...</p>
                <div class="btn-container">
                  <a class="button full">full article</a>
                </div>
              </div>
            </div>
            <div class="footer">
              <p class="icons">
                <a href="/"
                  ><i class="fas fa-comment-dots"></i
                  ><sup>
                    <% if ( resource.commentCount !== 0) { %> <%=
                    resource.commentCount %> <% } else { %> <% } %>
                  </sup></a
                >
                <a href="/">
                  <i class="fas fa-heart"></i
                  ><sup>
                    <% if ( resource.commentCount !== 0) { %> <%=
                    resource.commentCount %> <% } else { %> <% } %></sup
                  ></a
                >
                <i class="fas fa-star"></i
                ><sup>
                  <% if ( resource.avgRating !== 0) { %> <%= resource.avgRating
                  %> <% } else { %> <% } %>
                </sup>
              </p>
              <p class="badges">
                <% resource.categories.forEach(category => { %>
                <span class="badge"><%= category %></span>
                <% } )%>
              </p>
            </div>
          </div>
          <% }) %>
        </div>
      </div>
    </main>

    <!-- footer -->
    <%- include('partials/_footer') %>

    <script type="text/javascript" src="/vendor/jquery-3.0.0.js"></script>
    <script type="text/javascript" src="/scripts/app.js"></script>
  </body>
</html>
